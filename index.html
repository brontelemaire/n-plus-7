<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>N+7</title>

    <meta name="description" content="A simple exercise template." />
    <!-- styles -->
    <style></style>
  </head>
  <body>
    <h1>N+7</h1>
    <h2>Source text</h2>
    <p id="sourceText"></p>
    <h2>New text</h2>
    <p id="newText"></p>
    <!-- script -->
    <script>
      let nouns;
      const sourceText = `Escolania de Montserrat is so old that it is not clear how old it even is. The all-boys choir, who live and perform in a Benedictine abbey high on Monserrat mountain in Catalonia, Spain, is one of the oldest vocal ensembles in Europe, and predates the more widely known Vienna Boys Choir by several hundred years.

Speaking from Montserrat, the Escolania’s prefect, Father Efrén de Montellà, says that no one knows exactly how old the choir is, but the first written records of its existence appeared in 1307.

“We know the Benedictine community started here 1,000 years ago, so we are celebrating our first millennium in 2025,” he said. “The choir is at least 700 years old. It has survived through all the wars and all the conflicts in our history.”

For 365 days of the year, the choir boys, aged between nine and 14, perform twice daily in the basilica, to an estimated 3 million pilgrims a year. It is a choir that only occasionally hits the road, ensconced as it is in the Benedictine abbey of Santa Maria de Montserrat, 60km north of Barcelona. The public comes to the choir; rarely is the order reversed.

But this week Escolania de Montserrat arrived in Australia on a rare tour as part of this year’s Adelaide festival. The Escolania survived the destruction of the monastery during the Napoleonic wars and the choir’s temporary disbandment during the upheavals of the Spanish civil war. But it has endured and maintains a daily schedule that has been left virtually unchanged for centuries.

Boys enter the choral school at the ages of eight or nine. They are tutored in regular lessons in the morning, while their afternoons are devoted to music. Each boy studies two musical instruments in addition to their vocal training.

The process of auditioning is a relatively new concept, introduced after the second world war. Before then, it was a given that if a boy attended the monastery’s school, he would sing. When puberty hits, and a boy’s voice deepens, he must leave.

Although enrolments slowed to a trickle once Covid-19 struck, the prospect of opening up the Escolania to girls is not to be countenanced.

“What we have today is an old instrument – what you can hear is the sound of the past. Women did not sing in the church in the past,” De Montellà said.`;
      const wordOffset = 7;
      function generateNewText(text) {
        let splitText = text.split(" ");
        let newText = "";
        for (const word of splitText) {
          let indexInList = nouns.indexOf(word);
          let newWord;
          if (indexInList > -1) {
            if (nouns[indexInList + wordOffset]) {
              newWord = nouns[indexInList + wordOffset];
            }
          } else {
            newWord = word;
          }
          if (newText === "") {
            newText = newWord;
          } else {
            newText = newText + " " + newWord;
          }
        }
        return newText;
      }
      function initPoem(nounList) {
        nouns = nounList.split(/\r?\n/);
        newText = generateNewText(sourceText);
        document.getElementById("sourceText").innerHTML = sourceText;
        document.getElementById("newText").innerHTML = newText;
      }
      fetch("nounlist.txt")
        .then((response) => response.text())
        .then((textContent) => initPoem(textContent));
    </script>
    <!-- include the Glitch button to show what the webpage is about and
          to make it easier for folks to view source and remix -->
    <div
      class="glitchButton"
      style="position: fixed; top: 20px; right: 20px"
    ></div>
    <script src="https://button.glitch.me/button.js" defer></script>
  </body>
</html>
